{% extends "base.html" %}
{% load static %}
    {% block page_title %}Registry{% endblock %}

    {% block css_file %}<link rel="stylesheet" href="{% static 'css/registry.css' %}">{% endblock %}

    {% block content %}
    
    <ul class="registry">
        {% for item in registry_items %}
            <li>{{ item.title }}<br>
                <a href="{{ item.image_link }}"><img src="{% static item.image.name|cut:"images/" %}"/></a>
                {% if item.reserved_by %}
                    {% if item.reserved_by == request.user %}
                        <form action="{% url "reserve-item" %}" method="POST">
                            {%csrf_token%}
                            <input type="hidden" name="item_id" value={{ item.id }}>
                        <button>RESERVED - Click to Unreserve</button>
                    </form>
                    {% else %}
                        Another user has reserved this item.
                    {% endif %}
                {% else %}
                    <form action="{% url "reserve-item" %}" method="POST">
                        {%csrf_token%}
                        <input type="hidden" name="item_id" value={{ item.id }}>
                    <button>Reserve</button>
                </form>
                {% endif %}
            </li><br>
        {% endfor %}
    </ul>
    {% endblock %}